name: Docker Image CI

on:
  push:
    branches: [ "IMED" ]
  pull_request:
    branches: [ "IMED" ]


env:
   API_KEY: ${{secrets.PRO_API_KEY}}


jobs:
  job1:
    runs-on: ubuntu-latest 
    steps:
      - name: step 1
        run: echo "The API key is:${{env.API_KEY}}"

  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3
    - name: Build the Docker image
      run: docker build . --file Dockerfile --tag my-image-name:$(date +%s)
  deploye:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3
    - name: deploye the Docker image
      run: docker push imedbennaji/imed-first-image:imedbennaji
